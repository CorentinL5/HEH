---
created: 2025-03-26
tags:
  - Lessons/School/HEH/Bloc2/Quad2
Auteur: LALLEMENT Corentin - 240314
---

# # üìö  6.6 - IPsec - √©tude
> **Cr√©ation de la note √† *`11:43`* le *`2025-03-26`.***
> Par `LALLEMENT Corentin`, **`240314`**.
---

## üîê **R√©sum√© : IPsec et s√©curit√© VPN**

### **6.6.1 - Quels √©l√©ments de s√©curit√© un VPN IPsec apporte-t-il ?**

Un VPN utilisant **IPsec** fournit principalement :

- **Confidentialit√©** : chiffrement des donn√©es (avec ESP par exemple).
    
- **Int√©grit√©** : d√©tection des modifications gr√¢ce √† des fonctions de hachage (HMAC).
    
- **Authentification** : v√©rifie l'identit√© des pairs (via certificats ou PSK).
    
- **Protection contre la relecture** : gr√¢ce √† des num√©ros de s√©quence uniques.
    

---

### **6.6.2 - Pourquoi ESP n‚Äôest-il pas compatible avec la traduction de port (PAT) ?**

Le protocole **ESP** (Encapsulating Security Payload) n'utilise **pas de port**, car il fonctionne directement au-dessus d'IP (protocole n¬∞50). Or, **PAT (Port Address Translation)** fonctionne en traduisant des ports TCP/UDP. R√©sultat :

- Les routeurs NAT ne savent pas comment traiter les paquets ESP.
    
- Le NAT casse la communication IPsec.
    

---

### **6.6.3 - NAT-T (NAT Traversal)**

Le **NAT-Traversal** encapsule les paquets IPsec ESP dans des paquets **UDP** (g√©n√©ralement sur le port **4500**), ce qui permet :

- De **passer √† travers les NAT/PAT**.
    
- De maintenir la compatibilit√© entre IPsec et les r√©seaux NAT√©s.
    

---

### **6.6.4 - Fonction de l‚Äôalgorithme Diffie-Hellman**

Le **Diffie-Hellman (DH)** permet √† deux parties :

- De **g√©n√©rer une cl√© partag√©e** (cl√© de session), m√™me sur un canal non s√©curis√©.
    
- Sans jamais transmettre cette cl√© en clair.
    
- Bas√© sur des op√©rations math√©matiques asym√©triques (modulo exponentiel).
    

---

### **6.6.5 - Notion de groupe Diffie-Hellman**

Les **groupes DH** d√©finissent :

- La **taille des cl√©s** (par ex. 2048, 3072 bits‚Ä¶).
    
- Le **niveau de s√©curit√©** du calcul.
    
- Exemples : Groupe 2 (1024 bits, obsol√®te), Groupe 14 (2048 bits), Groupe 19+ (elliptique, plus rapide).
    

---

### **6.6.6 - Fonction du protocole IKE**

**IKE (Internet Key Exchange)** est utilis√© pour :

- **N√©gocier** les param√®tres de s√©curit√© entre les deux extr√©mit√©s d‚Äôun VPN IPsec.
    
- **√âchanger les cl√©s** de chiffrement.
    
- **√âtablir les SA (Security Associations)**.
    

---

### **6.6.7 - Phases IKE et port utilis√©**

- **Phase 1** : √©tablissement d‚Äôun **canal s√©curis√©** (ISAKMP SA) entre les pairs.
    
- **Phase 2** : n√©gociation des **SA IPsec** pour chiffrer le trafic r√©el.
    
- **Port utilis√©** : UDP **500** (ou **4500** si NAT-T est actif).
    

---

### **6.6.8 - SA (Security Association)**

Une **SA** est un ensemble de param√®tres :

- D√©finissant **comment** chiffrer, authentifier, et s√©curiser les communications.
    
- Inclut : algorithmes, cl√©s, dur√©e de vie, etc.
    
- Unidirectionnelle : il en faut une dans chaque sens.
    

---

### **6.6.9 - Perfect Forward Secrecy (PFS)**

Le **PFS** garantit que :

- Une **cl√© compromise** ne permet pas de d√©chiffrer d‚Äôanciens √©changes.
    
- En g√©n√©rant une **nouvelle cl√© de session pour chaque session**, ind√©pendamment des pr√©c√©dentes.
    
- Utilise souvent un nouveau **DH** √† chaque phase 2.
    

---

## ‚úÖ **TL;DR** :

- **IPsec** apporte confidentialit√©, int√©grit√©, authentification.
    
- **ESP** ne fonctionne pas bien avec NAT/PAT ‚Üí d'o√π **NAT-T** (ESP encapsul√© en UDP sur port 4500).
    
- **Diffie-Hellman** permet de g√©n√©rer une cl√© partag√©e s√©curis√©e.
    
- **Groupes DH** = tailles et niveaux de s√©curit√© diff√©rents.
    
- **IKE** (port 500 ou 4500) n√©gocie les param√®tres (Phase 1 et 2).
    
- **SA** = accord unidirectionnel sur la s√©curit√© (algos, cl√©s, etc.).
    
- **PFS** = s√©curit√© renforc√©e en cas de compromission (nouvelles cl√©s √† chaque session).
