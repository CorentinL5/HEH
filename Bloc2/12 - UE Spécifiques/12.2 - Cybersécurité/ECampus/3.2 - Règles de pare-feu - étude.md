---
created: 2025-02-13
tags:
  - Lessons/School/HEH/Bloc2/Quad2
---

# # ğŸ“š  3.2 - RÃ¨gles de pare-feu - Ã©tude
> **CrÃ©ation de la note Ã  *`12:01`* le *`2025-02-13`.***
---

## ğŸ”¥ **Chapitre 3.2 â€” RÃ¨gles de pare-feu FortiGate**

---

### âœ… **3.2.1 â€“ Champ â€œSourceâ€**

Dans le champ **Source**, on peut utiliser :

- Une **adresse IP** (ex. `192.168.1.0/24`)
    
- Une **interface** (ex. `lan`, `vpn`)
    
- Un **objet dâ€™adresse**
    
- Un **groupe dâ€™utilisateurs**
    
- **"All"** (toutes les sources)
    

---

### âœ… **3.2.2 â€“ Champ â€œDestinationâ€**

Dans le champ **Destination**, on peut utiliser :

- Une **adresse IP ou sous-rÃ©seau**
    
- Un **nom de domaine**
    
- Un **objet dâ€™adresse**
    
- Une **interface de sortie**
    
- **"All"** (toutes les destinations)
    

---

### âœ… **3.2.3 â€“ Champ â€œServiceâ€**

Il dÃ©termine les **protocoles/ports autorisÃ©s** :

- Protocoles standards : HTTP, HTTPS, DNS, FTP, SSH, etc.
    
- **Objets de service personnalisÃ©s**
    
- **Groupes de services**
    
- **"ALL"** = tous les ports/protocoles autorisÃ©s
    

---

### âœ… **3.2.4 â€“ Objet de pare-feu + avantages**

Un **objet de pare-feu** est une entitÃ© nommÃ©e reprÃ©sentant :

- Une IP, un port, une interface, un groupe, un service, etc.
    

**Avantages :**

1. **Gain de temps** : on rÃ©utilise les mÃªmes objets dans plusieurs rÃ¨gles.
    
2. **LisibilitÃ© et maintenance** amÃ©liorÃ©es.
    

---

### âœ… **3.2.5 â€“ Objet ISDB**

- **ISDB** = _Internet Service Database_
    
- Base d'objets prÃ©configurÃ©s par Fortinet (Netflix, Microsoft, Google, etc.)
    
- Permet dâ€™utiliser des **services cloud comme destination/source**.
    

---

### âœ… **3.2.6 â€“ Ordre de traitement des rÃ¨gles**

ğŸ” **Ordre sÃ©quentiel de haut en bas** :

- FortiGate lit les rÃ¨gles **dans lâ€™ordre de la liste**.
    
- **PremiÃ¨re rÃ¨gle qui matche** est appliquÃ©e.
    
- Si aucune rÃ¨gle ne correspond â†’ **rÃ¨gle implicite de refus**.
    

---

### âœ… **3.2.7 â€“ NÂ° de rÃ¨gle (ID) vs nÂ° de sÃ©quence**

- **ID** : identifiant unique interne de la rÃ¨gle.
    
- **SÃ©quence (Seq #)** : position dans lâ€™ordre dâ€™exÃ©cution.
    
    - On peut le modifier pour prioriser une rÃ¨gle.
        

---

### âœ… **3.2.8 â€“ Quatre types de rÃ¨gles**

1. **RÃ¨gle de pare-feu (IPv4 / IPv6)**
    
2. **Policy route (routage par politique)**
    
3. **NAT rule (rÃ¨gle de traduction dâ€™adresse)**
    
4. **RÃ¨gles de sÃ©curitÃ© SSL / VPN**
    

---

### âœ… **3.2.9 â€“ Pare-feu Ã  Ã©tats**

Un **pare-feu Ã  Ã©tats** (stateful) :

- Suit les **connexions actives** (ex : TCP handshake).
    
- N'autorise le trafic **que sâ€™il correspond Ã  une session valide**.
    
- Meilleure **sÃ©curitÃ© et performance**.
    

---

### âœ… **3.2.10 â€“ 5 bonnes pratiques**

1. **DÃ©sactiver ou supprimer les rÃ¨gles inutilisÃ©es.**
    
2. **Utiliser des objets** pour simplifier la gestion.
    
3. **Limiter les rÃ¨gles â€œALLâ€**, surtout pour services.
    
4. **Positionner les rÃ¨gles spÃ©cifiques en haut.**
    
5. **Activer les logs** pour les rÃ¨gles critiques.
    

---

### âœ… **3.2.11 â€“ Analyse des rÃ¨gles
> ![[Pasted image 20250326121925.png]]

#### ğŸ“„ **RÃ¨gle 3 : â€œInternetâ€**

|Champ|Valeur|
|---|---|
|**From**|`lan`|
|**To**|`wan1`|
|**Source**|`all` (tout le LAN)|
|**Destination**|`all` (Internet)|
|**Service**|`DNS`, `HTTP`, `HTTPS`|
|**Action**|`Accept`|
|**NAT**|`Enabled`|
|**Log**|`All` (log de tous les paquets)|

ğŸ” **RÃ©sumÃ©** : Autorise les utilisateurs du LAN Ã  accÃ©der Ã  Internet pour les services **Web et DNS** uniquement. **NAT activÃ©** pour masquer les IP internes.

---

#### ğŸš« **RÃ¨gle 4 : â€œImplicit Denyâ€**

- RÃ¨gle **automatique** crÃ©Ã©e par FortiGate.
    
- Bloque **tout le trafic non explicitement autorisÃ©**.
    
- Sans cette rÃ¨gle, certains trafics pourraient passer par dÃ©faut.
    

---

## âœ… **TL;DR**

- Les rÃ¨gles sâ€™appliquent **de haut en bas**, et FortiGate sâ€™arrÃªte Ã  la premiÃ¨re qui matche.
    
- On peut utiliser **IP, objets, services** dans les champs Source/Destination/Service.
    
- Un **pare-feu Ã  Ã©tats** suit les connexions et renforce la sÃ©curitÃ©.
    
- Lâ€™image montre une rÃ¨gle autorisant lâ€™accÃ¨s Internet **avec des ports limitÃ©s**, suivie dâ€™un **refus implicite**.
     