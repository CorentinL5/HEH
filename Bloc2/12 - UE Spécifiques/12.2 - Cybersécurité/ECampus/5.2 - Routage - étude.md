---
created: 2025-03-26
tags:
  - Lessons/School/HEH/BlocX/QuadX
Auteur: LALLEMENT Corentin - 240314
---

# # ğŸ“š  5.2 - Routage - Ã©tude
> **CrÃ©ation de la note Ã  *`12:06`* le *`2025-03-26`.***
> Par `LALLEMENT Corentin`, **`240314`**.
---

## ğŸŒ **Chapitre 5.2 â€” Routage dans un FortiGate**

---

### ğŸ”¹ **5.2.1 - Protocoles de routage supportÃ©s par un FortiGate**

Un FortiGate supporte les protocoles suivants :

- **RIP** (Routing Information Protocol)
    
- **OSPF** (Open Shortest Path First)
    
- **BGP** (Border Gateway Protocol)
    
- **IS-IS** (Ã  partir de certaines versions)
    
- **Static routing** (routage statique)
    
- **Policy-based routing** (routage basÃ© sur des rÃ¨gles)
    
- **Multicast routing**
    

---

### ğŸ”¹ **5.2.2 - Quâ€™est-ce que la Â« policy routing table Â» ? Que contient-elle ?**

La **Policy Routing Table** (table de routage basÃ©e sur des rÃ¨gles) permet :

- De **rediriger le trafic** en fonction de critÃ¨res spÃ©cifiques (IP source/destination, port, protocole, interface...).
    
- Elle contient des **rÃ¨gles personnalisÃ©es** qui s'appliquent avant la table de routage classique.
    

ğŸ¯ **Exemple** : rediriger le trafic web venant dâ€™un service interne vers un FAI spÃ©cifique.

---

### ğŸ”¹ **5.2.3 - ECMP : dÃ©finition et conditions dâ€™utilisation**

- **ECMP** = _Equal-Cost Multi-Path_.
    
- Permet de **distribuer le trafic** sur plusieurs routes ayant un **coÃ»t Ã©gal**.
    
- UtilisÃ© lorsque plusieurs **routes vers la mÃªme destination** ont une **mÃªme mÃ©trique**.
    

---

### ğŸ”¹ **5.2.4 - MÃ©thodes de balancement de charge ECMP**

1. **Round-Robin** : les connexions sont envoyÃ©es tour Ã  tour sur chaque lien.
    
2. **Source IP-based** : le hash de lâ€™IP source dÃ©termine la route utilisÃ©e.
    
3. **Source-destination IP-based** : combinaison des adresses source/destination.
    
4. **Session-based** : une session reste sur le mÃªme lien pendant toute sa durÃ©e.
    
5. **Weight-based** (pondÃ©ration) : certaines routes peuvent recevoir plus de trafic si on le souhaite.
    

---

### ğŸ”¹ **5.2.5 - Fonction de la vÃ©rification RPF (Reverse Path Forwarding)**

La RPF permet :

- De **vÃ©rifier que le chemin retour** vers lâ€™IP source dâ€™un paquet est **valide**.
    
- UtilisÃ© pour **prÃ©venir le spoofing IP** (paquets frauduleux) et renforcer la sÃ©curitÃ©.
    

---

### ğŸ”¹ **5.2.6 - Modes de fonctionnement de RPF**

1. **Strict Mode** :
    
    - Lâ€™adresse source doit Ãªtre **accessible via lâ€™interface dâ€™entrÃ©e** du paquet.
        
    - Si ce nâ€™est pas le cas â†’ paquet **rejetÃ©**.
        
2. **Loose Mode** :
    
    - Lâ€™adresse source doit simplement **exister dans la table de routage** (peu importe lâ€™interface).
        
    - Moins strict, permet plus de flexibilitÃ©.
        

---

### ğŸ•’ **Temps restant ? Bonus :**

---

### ğŸ”¹ **5.2.7 - PrioritÃ© dâ€™une route statique**

Utile pour :

- DÃ©finir **quelle route utiliser en prioritÃ©** lorsquâ€™il y a plusieurs chemins vers une mÃªme destination.
    
- Plus la **valeur est basse**, plus la route est prioritaire.
    

---

### ğŸ”¹ **5.2.8 - Commande CLI pour afficher la table de routage**

```bash
get router info routing-table all
```

â¡ï¸ Affiche toutes les **routes actives**.

---

### ğŸ”¹ **5.2.9 - Commande CLI pour voir toutes les routes (actives + inactives)**

```bash
diagnose ip router list
```

â¡ï¸ Montre les routes **actives et inactives**, avec plus de dÃ©tails.

---

### ğŸ”¹ **5.2.10 - Commande pour afficher la Policy Routing Table**

```bash
get router info policy-route
```

---

## âœ… **TL;DR** :

- **FortiGate** gÃ¨re RIP, OSPF, BGP, statique, multicast, et policy routing.
    
- La **Policy Routing Table** permet de forcer des routes selon des critÃ¨res personnalisÃ©s.
    
- **ECMP** = balancer du trafic sur routes de mÃªme coÃ»t.
    
- **RPF** empÃªche lâ€™usurpation IP en vÃ©rifiant le chemin retour.
    
- **PrioritÃ© de route** = choisir la meilleure route manuellement.
    
- Commandes utiles : `get router info routing-table`, `diagnose ip router list`, etc.
    
